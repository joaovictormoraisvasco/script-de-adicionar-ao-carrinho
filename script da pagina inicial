const BotoesAdicionar = document.querySelectorAll(".adicionar");
const remover = document.querySelectorAll(".remover");
const badge = document.getElementById("badge-carrinho");

// Pega o carrinho do localStorage ou cria um array vazio
let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

function atualizarBadge() {
    badge.textContent = carrinho.length;
    badge.style.display = carrinho.length > 0 ? "block" : "none";
}

BotoesAdicionar.forEach((botao, index) => {
    botao.addEventListener("click", () => {
        // Pega o nome e preço do produto baseado na posição do botão
        const produto = botao.parentElement;
        const nome = produto.querySelector("h2").textContent;
        const precoTexto = produto.querySelector("p").textContent.replace("R$ ", "").replace(",", ".");
        const preco = parseFloat(precoTexto);

        // Adiciona ao carrinho
        carrinho.push({ nome, preco });
        localStorage.setItem("carrinho", JSON.stringify(carrinho));

       
        atualizarBadge();
    });
});

remover.forEach((botao, index) => {
    botao.addEventListener("click", () => {
        const produto = botao.parentElement;
        const nome = produto.querySelector("h2").textContent;

        // Remove o primeiro item com esse nome
        const pos = carrinho.findIndex(item => item.nome === nome);
        if (pos > -1) {
            carrinho.splice(pos, 1);
            localStorage.setItem("carrinho", JSON.stringify(carrinho));
          
            atualizarBadge();
        }
    });
});

// Inicializa o badge quando a página carrega
atualizarBadge();
